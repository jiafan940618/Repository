webpackJsonp([3,38],{9:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:{data:{type:Object,twoWay:!0}},data:function(){return{provinces:{},citys:{},provinceId:"",cityId:""}},watch:{provinceId:function(t){var e=this;this.getCity(),this.provinces.forEach(function(o){return o.id===t?(e.data.provinceText=o.provinceName,void(e.data.provinceId=o.id)):void 0})},cityId:function(t){var e=this;this.citys.forEach(function(o){return o.id===t?(e.data.cityText=o.cityName,void(e.data.cityId=o.id)):void 0})}},ready:function(){this.getProvince()},methods:{initProvince:function(){void 0!==this.data.id?this.provinceId=this.data.provinceId:delete this.data.id},initCity:function(){void 0!==this.data.id?this.cityId=this.data.cityId:delete this.data.id},getProvince:function(){var t=this;this.$http.get("province/selectByExample",{limit:500}).then(function(e){t.provinces=e.data.data.list,t.initProvince()})},getCity:function(){var t=this;this.$http.get("city/selectByExample",{provinceId:this.provinceId,limit:500}).then(function(e){t.citys=e.data.data.list,t.initCity()})}}}},10:function(t,e,o){e=t.exports=o(1)(),e.push([t.id,"",""])},11:function(t,e,o){var a=o(10);"string"==typeof a&&(a=[[t.id,a,""]]);o(2)(a,{});a.locals&&(t.exports=a.locals)},12:function(t,e){t.exports='<div class=row _v-720ebf16=""> <div class=col-md-6 _v-720ebf16=""> <div class=form-group _v-720ebf16=""> <label _v-720ebf16="">省</label> <select class="form-control select2" style="width: 100%" v-model=provinceId v-on:change=getCity _v-720ebf16=""> <option v-for="province in provinces" v-bind:value=province.id _v-720ebf16="">{{province.provinceName}}</option> </select> </div> </div> <div class=col-md-6 _v-720ebf16=""> <div class=form-group _v-720ebf16=""> <label _v-720ebf16="">市</label> <select class="form-control select2" style="width: 100%" v-model=cityId _v-720ebf16=""> <option v-for="city in citys" v-bind:value=city.id _v-720ebf16="">{{city.cityName}}</option> </select> </div> </div> </div>'},13:function(t,e,o){var a,d;o(11),a=o(9),d=o(12),t.exports=a||{},t.exports.__esModule&&(t.exports=t.exports["default"]),d&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=d)},26:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:{ammeter:{twoWay:!0}},data:function(){return{devDate:[]}},components:{},methods:{getAmmeterData:function(){var t=this;this.$http.get("devConf/selectByExample").then(function(e){t.devDate=e.data.data.list})},selectAmmeter:function(t){this.ammeter=t,this.propAmmeter(t)},propAmmeter:function(t){this.ammeter=t,this.$emit("show-ammeter")},closeModal:function(){this.$emit("show-ammeter")}},ready:function(){this.getAmmeterData()}}},27:function(t,e,o){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var d=o(13),i=a(d),s=o(64),c=a(s),n=o(62),r=a(n);e["default"]={props:{data:{type:Object,twoWay:!0}},watch:{data:{deep:!0,handler:function(t,e){e.code}}},data:function(){return{stationList:[],area:{},station:{},modalShow:!1,AmmeterModalShow:!1}},ready:function(){},methods:{submit:function(){return this.data.outfactoryDt&&this.data.sim&&this.data.code?this.data.station.stationName?(this.data.outfactoryDt=this.data.outfactoryDt.replace("-","/").replace("-","/"),void this.$dispatch("submit",this.data)):void window.alert("请选择电站"):void window.alert("请补全资料")},showModal:function(){this.modalShow=!this.modalShow},showAmmeterModal:function(){this.AmmeterModalShow=!this.AmmeterModalShow},enterCode:function(){this.data.code=this.ammeterCode}},components:{"area-list":i["default"],"modal-tool":c["default"],ammeterModal:r["default"]},events:{"show-modal":"showModal","enter-code":"enterCode","show-ammeter":"showAmmeterModal"}}},28:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:{data:{type:Object,twoWay:!0},station:{type:Object,twoWay:!0}},data:function(){return{modalState:!0,stationList:[],searching:!1,currentStationId:0,currentStationCode:"",currentStationName:"",currentStationText:""}},components:{},methods:{getStationList:function(){var t=this;this.searching=!0,this.$http.get("station/selectByExample",{limit:15,query:this.query}).then(function(e){200===e.data.code&&(t.stationList=e.data.data.list,t.searching=!1)})},selectStation:function(t,e,o,a){this.currentStationId=t,this.currentStationCode=e,this.currentStationName=o,this.currentStationText=a},propStation:function(){this.data.stationId=this.currentStationId,this.station={stationName:this.currentStationName,stationCode:this.currentStationCode,addressText:this.currentStationText},this.$emit("show-modal")},closeModal:function(){this.$emit("show-modal")}},ready:function(){this.getStationList()}}},41:function(t,e,o){e=t.exports=o(1)(),e.push([t.id,".tips[_v-5c85c474]{font-size:12px;color:#a8a8a8}.searching[_v-5c85c474]{color:#a8a8a8}.modal[_v-5c85c474]{display:block}",""])},43:function(t,e,o){e=t.exports=o(1)(),e.push([t.id,"",""])},44:function(t,e,o){e=t.exports=o(1)(),e.push([t.id,"",""])},49:function(t,e,o){var a=o(41);"string"==typeof a&&(a=[[t.id,a,""]]);o(2)(a,{});a.locals&&(t.exports=a.locals)},51:function(t,e,o){var a=o(43);"string"==typeof a&&(a=[[t.id,a,""]]);o(2)(a,{});a.locals&&(t.exports=a.locals)},52:function(t,e,o){var a=o(44);"string"==typeof a&&(a=[[t.id,a,""]]);o(2)(a,{});a.locals&&(t.exports=a.locals)},58:function(t,e){t.exports='<div class=modal style="display: block" _v-5c85c474=""> <div class=modal-dialog _v-5c85c474=""> <div class=modal-content _v-5c85c474=""> <div class=modal-header _v-5c85c474=""> <button type=button class=close data-dismiss=modal aria-label=Close _v-5c85c474=""> <span aria-hidden=true @click=closeModal _v-5c85c474="">×</span></button> <h4 class=modal-title _v-5c85c474="">电站搜索</h4> </div> <div class=modal-body _v-5c85c474=""> <div class=form-group style=height:30px _v-5c85c474=""> <div class=box-tools _v-5c85c474=""> <div class="input-group input-group-sm pull-left" style="width: 300px" _v-5c85c474=""> <input placeholder=电站码/电站名/电站地址 type=text name=table_search class="form-control pull-right" v-model=query v-on:keyup.enter=getStationList _v-5c85c474=""> <div class=input-group-btn v-on:click=getStationList _v-5c85c474=""> <button type=submit class="btn btn-default" _v-5c85c474=""><i class="fa fa-search" _v-5c85c474=""></i></button> </div> </div> <p v-show=searching class=searching _v-5c85c474="">加载中...</p> </div> </div> <div class=form-group _v-5c85c474=""> <table class="table table-bordered order-table-info" _v-5c85c474=""> <thead _v-5c85c474=""> <tr _v-5c85c474=""> <td _v-5c85c474="">电站码</td> <td _v-5c85c474="">电站名</td> <td _v-5c85c474="">电站地址</td> <td _v-5c85c474="">选择</td> </tr> </thead> <tbody _v-5c85c474=""> <tr v-for="station in stationList" v-if="$index < 10" _v-5c85c474=""> <td _v-5c85c474="">{{station.stationCode}}</td> <td _v-5c85c474="">{{station.stationName}}</td> <td _v-5c85c474="">{{station.addressText}}</td> <td _v-5c85c474=""><a href=javascript:; @click=selectStation(station.id,station.stationCode,station.stationName,station.addressText) _v-5c85c474=""> <span v-if="currentStationId === station.id" _v-5c85c474="">√</span> <span v-if="currentStationId !== station.id" _v-5c85c474="">选择</span></a> </td> </tr> </tbody> </table> </div> <p class=tips _v-5c85c474="">仅显示10条记录</p> </div> <div class=modal-footer _v-5c85c474=""> <button type=button class="btn btn-default pull-left" data-dismiss=modal @click=closeModal _v-5c85c474="">关闭</button> <button type=button class="btn btn-primary" @click=propStation _v-5c85c474="">确定</button> </div> </div> </div> </div>'},60:function(t,e){t.exports='<div class=modal style="display: block" _v-6c9d99d6=""> <div class=modal-dialog _v-6c9d99d6=""> <div class=modal-content _v-6c9d99d6=""> <div class=modal-header _v-6c9d99d6=""> <button type=button class=close data-dismiss=modal aria-label=Close :cl="" _v-6c9d99d6=""> <span aria-hidden=true @click=closeModal _v-6c9d99d6="">×</span></button> <h4 class=modal-title _v-6c9d99d6="">电表库搜索</h4> </div> <div class=modal-body _v-6c9d99d6=""> <div class=form-group style=height:30px _v-6c9d99d6=""> <div class=box-tools _v-6c9d99d6=""> <div class="input-group input-group-sm pull-left" style="width: 300px" _v-6c9d99d6=""> <input placeholder=电站码/电站名/电站地址 type=text name=table_search class="form-control pull-right" v-model=query v-on:keyup.enter=getStationList _v-6c9d99d6=""> <div class=input-group-btn v-on:click=getStationList _v-6c9d99d6=""> <button type=submit class="btn btn-default" _v-6c9d99d6=""><i class="fa fa-search" _v-6c9d99d6=""></i></button> </div> </div> <p v-show=searching class=searching _v-6c9d99d6="">加载中...</p> </div> </div> <div class=form-group _v-6c9d99d6=""> <table class="table table-bordered order-table-info" _v-6c9d99d6=""> <thead _v-6c9d99d6=""> <tr _v-6c9d99d6=""> <td _v-6c9d99d6="">电表名</td> <td _v-6c9d99d6="">电表项数类型</td> <td _v-6c9d99d6="">电表码</td> <td _v-6c9d99d6="">选择</td> </tr> </thead> <tbody _v-6c9d99d6=""> <tr v-for="dev in devDate" v-if="$index < 10" _v-6c9d99d6=""> <td _v-6c9d99d6="">{{dev.dname}}</td> <td _v-6c9d99d6="">{{dev.dtype}}</td> <td _v-6c9d99d6="">{{dev.caddr}}</td> <td _v-6c9d99d6=""> <a href=javascript:; @click=selectAmmeter(dev.caddr) _v-6c9d99d6=""> <span v-if="ammeter === dev.caddr" _v-6c9d99d6="">√</span> <span v-if="ammeter !== dev.caddr" _v-6c9d99d6="">选择</span></a> </td> </tr> </tbody> </table> </div> <p class=tips _v-6c9d99d6="">仅显示10条记录</p> </div> </div> </div> </div>'},61:function(t,e){t.exports='<section class=content _v-751bd591=""> <div class=box _v-751bd591=""> <div class="box-header with-border" _v-751bd591=""> <h3 class=box-title _v-751bd591=""> 电表编辑 </h3> </div> <div class=box-body _v-751bd591=""> <div class="form-group col-xs-6" _v-751bd591=""> <label _v-751bd591="">电表码</label> <a href=javascript:; @click=showAmmeterModal _v-751bd591="">从电码库中读取</a> <input v-model=data.code maxlength=8 type=text class=form-control id="" placeholder=电表码 _v-751bd591=""> </div> <ammeter-modal :ammeter.sync=data.code @enter-code=enterCode @show-ammeter=showAmmeterModal v-if=AmmeterModalShow _v-751bd591=""></ammeter-modal> <div class="form-group col-xs-6" _v-751bd591=""> <label _v-751bd591="">出厂日期</label> <input v-model=data.outfactoryDt type=date class=form-control id="" placeholder=出厂日期 _v-751bd591=""> </div> <div class="form-group col-xs-6" _v-751bd591=""> <label _v-751bd591="">sim卡</label> <input v-model=data.sim type=text class=form-control id="" placeholder=sim卡 _v-751bd591=""> </div> <div class="form-group col-xs-6" _v-751bd591=""> <label _v-751bd591="">初始电量</label> <input v-model=data.initKwh type=text class=form-control placeholder=初始电量 _v-751bd591=""> </div> <div class="form-group col-xs-12" _v-751bd591=""> <area-list :data.sync=data _v-751bd591=""></area-list> </div> <div class="form-group col-xs-12" _v-751bd591=""> <input v-model=data.addressText type=text class=form-control id="" placeholder=详细地址 _v-751bd591=""> </div> <div class="form-group col-xs-12" _v-751bd591=""> <label _v-751bd591="">已选择电站-</label> {{data.station.stationName}} {{data.station.stationCode}} {{data.station.addressText}} <a href=javascript:; @click=showModal _v-751bd591="">选择电站</a> </div> </div> <modal-tool v-if=modalShow :data.sync=data :station.sync=data.station @show-modal=showModal transition=fadeTB _v-751bd591=""></modal-tool> <div class=box-footer _v-751bd591=""> <button v-on:click=submit type=button class="btn btn-primary" _v-751bd591="">提交</button> </div> </div> </section>'},62:function(t,e,o){var a,d;o(51),a=o(26),d=o(60),t.exports=a||{},t.exports.__esModule&&(t.exports=t.exports["default"]),d&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=d)},63:function(t,e,o){var a,d;o(52),a=o(27),d=o(61),t.exports=a||{},t.exports.__esModule&&(t.exports=t.exports["default"]),d&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=d)},64:function(t,e,o){var a,d;o(49),a=o(28),d=o(58),t.exports=a||{},t.exports.__esModule&&(t.exports=t.exports["default"]),d&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=d)},80:function(t,e,o){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var d=o(63),i=a(d);e["default"]={data:function(){return{data:{station:{stationName:"",stationCode:"",addressText:""},initKwh:0}}},components:{"form-from":i["default"]},methods:{timeFormat:function(t){var e=new Date(t),o=e.getFullYear(),a=e.getMonth();10>a&&(a="0"+(a+1));var d=e.getDate();return 10>d&&(d="0"+d),o+"-"+a+"-"+d},delAmmeter:function(){var t=this;this.currentCode&&this.$http.get("station/delAmmeter",{id:this.currentStationId,oldCode:this.currentCode}).then(function(e){t.addAmmeter()})},addAmmeter:function(){this.$http.get("station/addAmmeter",{id:this.data.stationId,newCode:this.data.code}).then(function(t){console.log(t),200===t.data.code?window.alert("添加成功"):window.alert(t.data.msg)})}},events:{submit:function(t){var e=this;this.$http.get("ammeter/insert",t).then(function(t){200===t.data.code?e.addAmmeter():window.alert(t.data.msg)})}}}},160:function(t,e,o){e=t.exports=o(1)(),e.push([t.id,"",""])},208:function(t,e,o){var a=o(160);"string"==typeof a&&(a=[[t.id,a,""]]);o(2)(a,{});a.locals&&(t.exports=a.locals)},275:function(t,e){t.exports='<form-from :data.sync=data _v-03754312=""></form-from>'},323:function(t,e,o){var a,d;o(208),a=o(80),d=o(275),t.exports=a||{},t.exports.__esModule&&(t.exports=t.exports["default"]),d&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=d)}});